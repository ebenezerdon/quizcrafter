<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>QuizCrafter App</title>
  <link rel="stylesheet" href="styles/tailwind.css" data-teda="tailwind-static" />
    <link rel="stylesheet" href="styles/main.css">
  </head>
<body class="bg-slate-50 text-slate-900 antialiased min-h-screen">
  <header class="sticky top-0 z-40 backdrop-blur bg-white/80 border-b border-slate-200">
    <div class="mx-auto max-w-7xl px-6 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <a href="index.html" class="btn-ghost" aria-label="Back to landing">Home</a>
        <div class="hidden md:block h-6 w-px bg-slate-200"></div>
        <div class="kicker">QuizCrafter</div>
      </div>
      <div class="flex items-center gap-2">
        <button id="newQuizBtn" class="btn-secondary">New quiz</button>
        <a href="assets/sample.csv" class="btn-ghost">Sample CSV</a>
      </div>
    </div>
  </header>

  

  <main class="mx-auto max-w-7xl px-6 py-8 md:py-10">
    <div class="flex flex-col md:flex-row gap-6">
      <!-- Sidebar: quizzes list -->
      <aside class="md:w-80 shrink-0">
        <div class="card p-5">
          <div class="flex items-center justify-between">
            <h2 class="font-semibold">Your quizzes</h2>
            <button id="refreshBtn" class="menu-btn" title="Refresh">↻</button>
          </div>
          <div id="quizzesList" class="mt-3 space-y-2" aria-live="polite"></div>
          <div class="mt-4 border-t border-slate-200 pt-4">
            <div class="text-xs text-slate-500">Attempts saved locally. No sign-in required.</div>
          </div>
        </div>

        <div class="mt-6 card p-5">
          <h3 class="font-semibold">Score history</h3>
          <div id="historyWrap" class="mt-3">
            <div id="historyChart" class="flex items-end gap-1 h-24"></div>
            <div id="historyMeta" class="mt-2 text-xs text-slate-500"></div>
          </div>
        </div>
      </aside>

      <!-- Main panel -->
      <section class="flex-1 space-y-6">
        <!-- Tabs -->
        <div class="flex items-center gap-2">
          <button class="tab-btn active" data-tab="import">Import & Build</button>
          <button class="tab-btn" data-tab="take">Take Quiz</button>
        </div>

        <!-- Import & Build Panel -->
        <div id="panel-import" class="card p-6">
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium">Quiz name</label>
              <input id="quizNameInput" type="text" class="input mt-2" placeholder="e.g., Biology Chapter 3" aria-label="Quiz name">

              <div class="mt-6" aria-label="CSV upload">
                <div id="csvDropZone" class="border-2 border-dashed border-slate-300 rounded-2xl p-6 text-center hover:border-rose-400 transition">
                  <div class="text-slate-600">Drag and drop CSV here</div>
                  <div class="text-xs text-slate-500 mt-1">or</div>
                  <div class="mt-3 flex items-center justify-center gap-2">
                    <input id="fileInput" type="file" accept=".csv,text/csv" class="sr-only" aria-hidden="true">
                    <button id="browseBtn" class="btn-secondary">Choose file</button>
                    <button id="pasteBtn" class="btn-ghost">Paste CSV</button>
                  </div>
                </div>
                <div class="mt-3 text-xs text-slate-500">Format: question, answer, option1, option2, option3. Two columns creates short-answer questions. Use quotes for commas.</div>
                <div class="mt-2"><a href="assets/sample.csv" class="link" style="color:#e11d48">Download sample</a></div>
              </div>

              <div class="mt-6">
                <button id="saveQuizBtn" class="btn-primary">Save quiz</button>
              </div>
            </div>

            <div>
              <h3 class="font-semibold">Preview</h3>
              <div id="previewContainer" class="mt-3 border border-slate-200 rounded-xl overflow-hidden">
                <div class="p-4 text-sm text-slate-500">No CSV loaded yet.</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Take Quiz Panel -->
        <div id="panel-take" class="card p-6 hidden">
          <div class="grid md:grid-cols-3 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium">Choose quiz</label>
              <select id="quizSelect" class="input mt-2"></select>
            </div>
            <div>
              <label class="block text-sm font-medium">Options</label>
              <div class="mt-2 flex flex-col gap-2 text-sm">
                <label class="inline-flex items-center gap-2"><input id="optShuffleQ" type="checkbox" class="rounded text-rose-600" checked> Shuffle questions</label>
                <label class="inline-flex items-center gap-2"><input id="optShuffleA" type="checkbox" class="rounded text-rose-600" checked> Shuffle answers</label>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium">Limit questions (optional)</label>
              <input id="limitCount" type="number" min="1" class="input mt-2" placeholder="Leave blank for all">
            </div>
          </div>
          <div class="flex items-center gap-3">
            <button id="startQuizBtn" class="btn-primary">Start quiz</button>
            <button id="resumeBtn" class="btn-secondary hidden">Resume last session</button>
          </div>
        </div>

        <!-- Player Panel -->
        <div id="panel-player" class="card p-6 hidden" aria-live="polite">
          <div class="flex items-center justify-between">
            <div class="kicker">Question <span id="qIndex">1</span>/<span id="qTotal">1</span></div>
            <div id="timerText" class="text-sm text-slate-500"></div>
          </div>
          <div class="mt-3 progress-track" aria-hidden="true"><div id="progressBar" class="progress-bar w-0"></div></div>
          <div id="questionContainer" class="mt-5"></div>
          <div class="mt-6 flex items-center justify-between">
            <button id="prevBtn" class="btn-ghost">Previous</button>
            <div class="flex items-center gap-2">
              <button id="finishBtn" class="btn-secondary">Finish</button>
              <button id="nextBtn" class="btn-primary">Next</button>
            </div>
          </div>
        </div>

        <!-- Results Panel -->
        <div id="panel-results" class="card p-6 hidden">
          <div class="flex items-center justify-between">
            <h3 class="text-xl font-bold">Results</h3>
            <div class="pill" id="resultPill">0% correct</div>
          </div>
          <div id="resultsSummary" class="mt-4"></div>
          <div class="mt-6 flex items-center gap-2">
            <button id="retryBtn" class="btn-primary">Retry</button>
            <button id="backToTakeBtn" class="btn-secondary">Back to options</button>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Paste Modal -->
  <div id="pasteModal" class="fixed inset-0 hidden items-center justify-center bg-black/40 p-4" role="dialog" aria-modal="true" aria-labelledby="pasteTitle">
    <div class="card w-full max-w-2xl p-5">
      <div class="flex items-center justify-between">
        <h3 id="pasteTitle" class="text-lg font-semibold">Paste CSV</h3>
        <button id="closePasteBtn" class="menu-btn" aria-label="Close">✕</button>
      </div>
      <textarea id="pasteArea" class="input mt-4 h-56" placeholder="question,answer,option1,option2,option3"></textarea>
      <div class="mt-4 flex items-center justify-between">
        <div class="text-xs text-slate-500">We detect commas, semicolons, or tabs automatically.</div>
        <div class="flex items-center gap-2">
          <button id="clearPasteBtn" class="btn-ghost">Clear</button>
          <button id="importPasteBtn" class="btn-primary">Import</button>
        </div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

  <!-- Scripts in required order -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="scripts/helpers.js"></script>
  <script src="scripts/ui.js"></script>
  <script src="scripts/main.js"></script>
</body>
</html>
